# 4주차
> p289 강의 34 ~ p328 강의 39, (37강 제외)

---
## 강의 34. 시스템 안정화
### 시스템 안정화를 위한 상반관계
+ 메모리를 빠듯하게 튜닝하게 되면 메모리가 늘어났을 때 곧바로 스왑을 사용하기 시작해서 성능이 저하되면서 서비스 장애로 이어지게 된다.
+ 메모리와 CPU를 7할까지 사용하자
+ 어느 정도 버퍼를 유지하고 버퍼가 부족해지면 새로운 서버를 추가하거나 구성을 약간 변경해서 전체적인 사용량을 줄이는 대책을 계속해감으로써 안정성을 확보할 수 있다.
+ 안정성 ↔ 속도, 자원효율
### 시스템 불안정 요인
+ 기능 추가로 인한 부하증가
+ 메모리 누수
  + Lightweight Language
  + 버퍼를 다 사용해서 스왑을 사용하면서 부하가 증가
+ 무한루프나 비정상적 메모리를 소비하게 되는 코드
  + 지뢰가 있더라도 문제가 되지 않도록 설계
+ 사용자의 액세스 패턴
  + 인기있는 사이트에 집중적인 접속이 되는 경우
  + squid 캐시 서버를 두어 게스트 사용자의 캐시를 반환하도록 하는 방법
+ 데이터랑의 증가
+ 외부연계 추가
  + 외부 API의 영향을 받아 같이 다운되는 형태
  + 외부 노이즈에 견딜 수 있는 프로그램으로 설계하자!
+ 하드웨어의 불안정성으로 인한 처리능력 저하
  + 메모리나 HDD 장애, NIC 장애

---
## 강의 35. 시스템 안정화 대책 
### 실제 안정화 대책 - 적절한 버퍼 유지와 불안정한 요인 제거
+ 임계치 설정
+ 높은 부하를 발생시킬 SQL이 있다면 DB를 분리해서 관리하자
+ 메모리 누수 방지
+ 이상동작의 자율제어
  + 자동 DoS 판정, 반복된 리로드는 403 반환으로 액세스를 차단
  + 자동 재시작, AP서버, 호스트 OS
  + 자동 쿼리처리, 진행중인 쿼리 중 일정 시간이 소요된 SQL을 KILL  

---
## 강의 36. 가상화 기술
### 목적
+ 확장성: 오버헤드 최소화
+ 비용대비 성능: 리소스 사용률 향상, 운용의 유연함
+ 고가용성: 환경의 격리
### 가상화 서버 구축정책
+ 남아있는 리소스를 사용할 게스트 OS 투입
+ 리소스 소비경향이 비슷하고 부하가 높은 용도의 게스트 OS끼리는 리소스를 서로 점유하도록 두지 않는다.
+ 가상 웹서버, 가상 DB서버
### 장점
+ 물리적 리소스에 해방되어 확장성 확보가 가능
+ 운용비용이 저하되고 성능향상, 고가용성
### 단점
+ 성능상의 오버헤드
+ 네트워크 불안정 요인

---
## 강의 38. 네트워크 분기점
### 네트워크의 분기점을 알아두자
+ PC라우터의 한계
  + 30만 pps = 1Gbps
  + PC 라우터를 열거하거나 박스형 라우터를 구입한다.
+ IP주소로 통신대상을 지정하면 이에 대응하는 MAC주소를 검색한 후, 이더넷 계층에서 MAC 주소를 사용해서 통신하게 된다.
+ IP주소와 MAC주소의 관계를 나타내는 것은 ARP테이블
+ 대략 1서브넷은 500호스트가 한계
### 네트워크 구조의 계층화
+ Access 계층 < Distribution 계층 < Core 계층
+ 계층화를 수행하고 각각의 스위치나 라우터를 제대로 이중화함으로써 네트워크 구조의 다중화를 실현하고 있다.
### Content Delivery Network
+ 세계 각지에 서버를 두고 거기에 미디어를 캐싱시켜 사용자가 가지러 갈 때에는 가장 가까운 서버로 액세스해서 다운로드 되도록 하는 것이 기본 동작원리이다.

---
## 강의 39. 한층 높은 단계로
### AS번호, BGP라는 인터넷 라우팅 제어 프로토콜
+ 10Gbps 이상인 인터넷 전체에 관련될 법한 트래픽 제어 환경